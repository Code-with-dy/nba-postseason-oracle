<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Southeast Division Dashboard</title>
  <link rel="stylesheet" href="oracle.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <header class="header">
    Southeast Division Oracle Dashboard
  </header>

  <div class="dashboard-container">

    <!-- Chart container -->
    <div class="chart-section">
      <canvas id="southeastChart" width="400" height="200"></canvas>
    </div>

    <!-- Teams cards -->
    <div class="teams-container" id="oracle-output">
      <!-- JS will populate cards here -->
    </div>

  </div>

  <script src="oracle.js"></script>
  <script>
    fetch('predictions.json')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('oracle-output');
        
        const labels = [];
        const probabilities = [];

        data.forEach(pred => {
          labels.push(pred.team);
          probabilities.push(pred.probability * 100); // convert to % for chart

          const card = document.createElement('div');
          card.className = 'team-card';

          const logoPath = `assets/images/${pred.team.toLowerCase().replace(/\s/g,'-')}-logo.svg`;

          card.innerHTML = `
            <img src="${logoPath}" alt="${pred.team}" onerror="this.style.display='none'">
            <h3>${pred.team}</h3>
            <p>Prediction: ${(pred.probability*100).toFixed(1)}%</p>
          `;
          container.appendChild(card);
        });

        // Render bar chart
        const ctx = document.getElementById('southeastChart').getContext('2d');
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              label: 'Playoff Probability (%)',
              data: probabilities,
              backgroundColor: 'rgba(226, 35, 26, 0.7)',
              borderColor: 'rgba(226, 35, 26, 1)',
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: (ctx) => `${ctx.dataset.label}: ${ctx.raw.toFixed(1)}%`
                }
              }
            },
            scales: {
              y: { beginAtZero: true, max: 100 },
              x: { ticks: { color: '#fff' } }
            }
          }
        });

      })
      .catch(err => console.error('Error loading predictions:', err));
  </script>
</body>
</html>
