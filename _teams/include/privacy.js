(function(){"use strict";const T="/_teams/consentjs/oneTrustConsentListener.js",N="d0494fd0-8921-497a-8323-e3d29775ce1b",S="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",o="https://cdn.nba.com/user-consent/index.min.js";function i(n,e=1e3){typeof window>"u"||!window.document||!n||setTimeout(n,e)}function w(){if(typeof window>"u"||!window.document)return;window.__USER_CONSENT_SCRIPT_LOADING__=window.__USER_CONSENT_SCRIPT_LOADING__||!1,!!!document.head.querySelector(`script[src*="${o}"]`)&&!window.__USER_CONSENT_SCRIPT_LOADING__&&(window.__USER_CONSENT_SCRIPT_LOADING__=!0,i(I))}const E=3;function u(){if(typeof window>"u"||!window.document)return;window.__GPT_LOADED__=window.__GPT_LOADED__||!1,window.__ONETRUST_CONSENT_LISTENER_SCRIPT_LOADING__=window.__ONETRUST_CONSENT_LISTENER_SCRIPT_LOADING__||!1,window.__ONETRUST_CONSENT_LISTENER_INITIALIZED__=window.__ONETRUST_CONSENT_LISTENER_INITIALIZED__||!1;let n=0;const e=()=>{if(window.__ONETRUST_CONSENT_LISTENER_INITIALIZED__)return;if(!window.__GPT_LOADED__){if(n+=1,n<E){setTimeout(e,1e3);return}console.warn("GPT not loaded, cannot initialize OneTrust consent listener");return}!document.head.querySelector(`script[src*="${T}"]`)&&!window.__ONETRUST_CONSENT_LISTENER_SCRIPT_LOADING__&&(window.__ONETRUST_CONSENT_LISTENER_SCRIPT_LOADING__=!0,i(a)),window.__ONETRUST_CONSENT_LISTENER_INITIALIZED__=!0};e()}function C(n=3,e){return new Promise(t=>{if(typeof window>"u"){t(!1);return}if(e.current)return;let s=0;w(),u();const d=()=>{var c;if(e.current)return;if(!((c=window==null?void 0:window.WM)!=null&&c.UserConsent)){if(s+=1,s<n){setTimeout(d,1e3);return}console.warn("Failed to initialize Privacy UserConsent after multiple attempts.");return}let _=window._esi?window._esi.country:"US";_==="$(country)"&&(_="US"),window.WM.UserConsent.init({brand:"NBA",cookieDomain:".nba.com",domId:`${N}`,src:`${S}`,countryCode:_}),e.current=!0,t(!0)};d()})}function a(){if(typeof window>"u"||!window.document)return;const n=document.createElement("script");n.src="/_teams/consentjs/oneTrustConsentListener.js",n.onload=()=>{window.__ONETRUST_CONSENT_LISTENER_SCRIPT_LOADING__=!1},n.onerror=()=>{window.__ONETRUST_CONSENT_LISTENER_SCRIPT_LOADING__=!1},document.head.appendChild(n)}function I(){if(typeof window>"u"||!window.document)return;const n=document.createElement("script");n.src=String(o),n.async=!1,n.onload=()=>{window.__USER_CONSENT_SCRIPT_LOADING__=!1},n.onerror=()=>{window.__USER_CONSENT_SCRIPT_LOADING__=!1},document.head.appendChild(n)}let r={current:!1};window.addEventListener("DOMContentLoaded",()=>{(async()=>await C(5,r)&&(r.current=!0))()})})();
